<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$BWAR Token Sale</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: gold;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 500px;
            margin: auto;
            padding: 20px;
            border: 1px solid gold;
            border-radius: 10px;
            background-color: #222;
        }
        input {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
        }
        button {
            background-color: gold;
            color: black;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>$BWAR Token Sale</h1>
    <div class="container">
        <button onclick="connectWallet()">Connect Wallet</button>
        <p id="walletAddress">Wallet: Not Connected</p>

        <h3>Presale</h3>
        <p>Rate: 0.01 BNB = 100,000 $BWAR</p>
        <p>Min Purchase: 0.01 BNB</p>
        <input type="number" id="bnbInput" placeholder="Enter BNB amount" oninput="calculateTokens()">
        <p>Tokens You Get: <span id="tokenOutput">0</span> $BWAR</p>
        <button onclick="buyTokens()">Buy Now</button>

        <h3>Claim Airdrop</h3>
        <button onclick="claimAirdrop()">Claim Airdrop</button>
    </div>

    <script>
        let account;
        const contractAddress = "0xYourContractAddress"; // Ganti dengan alamat kontrak $BWAR Anda
        const contractABI = [/* ABI Kontrak Anda */];

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                    account = accounts[0];
                    document.getElementById("walletAddress").innerText = `Wallet: ${account}`;
                    window.web3 = new Web3(window.ethereum);
                    window.contract = new web3.eth.Contract(contractABI, contractAddress);
                } catch (error) {
                    console.error("User denied account access", error);
                }
            } else {
                alert("Please install MetaMask!");
            }
        }

        function calculateTokens() {
            let bnbAmount = document.getElementById("bnbInput").value;
            let tokens = (bnbAmount / 0.01) * 100000; 
            document.getElementById("tokenOutput").innerText = tokens.toLocaleString();
        }

        async function buyTokens() {
            if (!account) return alert("Connect your wallet first!");

            let bnbAmount = document.getElementById("bnbInput").value;
            if (bnbAmount < 0.01) return alert("Minimum purchase is 0.01 BNB");

            try {
                let weiAmount = web3.utils.toWei(bnbAmount, "ether");
                await window.contract.methods.tokenSale(account).send({
                    from: account,
                    value: weiAmount
                });
                alert("Presale Purchase Successful!");
            } catch (error) {
                console.error(error);
                alert("Transaction Failed");
            }
        }

        async function claimAirdrop() {
            if (!account) return alert("Connect your wallet first!");
            try {
                await window.contract.methods.getAirdrop(account).send({ from: account });
                alert("Airdrop Claimed Successfully!");
            } catch (error) {
                console.error(error);
                alert("Airdrop Claim Failed");
            }
        }
    </script>

</body>
</html>
